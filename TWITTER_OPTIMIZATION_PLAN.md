# ğŸš€ Twitterå‘å¸ƒç³»ç»Ÿæ•°æ®åº“ä¸æœºåˆ¶ä¼˜åŒ–è®¡åˆ’

## ğŸ“Š ç¬¬ä¸€é˜¶æ®µï¼šæ•°æ®åº“æ¶æ„ä¼˜åŒ– (1-2å‘¨)

### ğŸ—„ï¸ æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–
1. **ç´¢å¼•ç­–ç•¥ä¼˜åŒ–**
   - æ·»åŠ å¤åˆç´¢å¼•ï¼š`(status, scheduled_at, priority)` ç”¨äºä»»åŠ¡æŸ¥è¯¢
   - åˆ›å»ºé¡¹ç›®-çŠ¶æ€å¤åˆç´¢å¼•ï¼š`(project_id, status)`
   - ä¼˜åŒ–æ—¶é—´èŒƒå›´æŸ¥è¯¢ç´¢å¼•ï¼š`(scheduled_at, status)`

2. **æ•°æ®åº“å¼•æ“å‡çº§**
   - é…ç½®è¿æ¥æ± ï¼š20ä¸ªè¿æ¥ï¼Œ10ç§’è¶…æ—¶

3. **æ•°æ®åˆ†åŒºä¸æ¸…ç†**
   - å®ç°æŒ‰æœˆåˆ†åŒºçš„æ—¥å¿—è¡¨
   - è‡ªåŠ¨æ¸…ç†90å¤©ä»¥ä¸Šçš„æ‰§è¡Œè®°å½•
   - ä¼˜åŒ–æ•°æ®åº“vacuumç­–ç•¥

## âš¡ ç¬¬äºŒé˜¶æ®µï¼šAPIé™åˆ¶ä¸é¢‘ç‡ä¼˜åŒ– (1å‘¨)

### ğŸ“ˆ æ™ºèƒ½é¢‘ç‡ç®¡ç†
1. **åŠ¨æ€å‘å¸ƒé¢‘ç‡**
   - åŸºäºAPIé…é¢å®æ—¶è°ƒæ•´å‘å¸ƒé—´éš”
   - å®ç°peek-hoursä¼˜åŒ–ï¼š9ç‚¹ã€12ç‚¹ã€15ç‚¹ã€18ç‚¹ã€21ç‚¹
   - é»‘åå•æ—¶æ®µé¿è®©ï¼š0-6ç‚¹è‡ªåŠ¨æš‚åœ

2. **APIé…é¢æ™ºèƒ½ç®¡ç†**
   - é¢„æµ‹æ€§é…é¢ç›‘æ§ï¼šå‰©ä½™é‡<20%æ—¶å»¶é•¿é—´éš”
   - ä¼˜å…ˆçº§ä»»åŠ¡é…é¢é¢„ç•™ç­–ç•¥

3. **å‘å¸ƒè´¨é‡ä¼˜åŒ–**
   - AIå†…å®¹å¢å¼ºä¸Twitterå­—ç¬¦é™åˆ¶å¹³è¡¡
   - é‡å¤å†…å®¹æ£€æµ‹ä¸å»é‡

## ğŸ”§ ç¬¬ä¸‰é˜¶æ®µï¼šè°ƒåº¦æœºåˆ¶é‡æ„ (1-2å‘¨)

### âš™ï¸ ä»»åŠ¡è°ƒåº¦å™¨å‡çº§
1. **å¹¶å‘æ§åˆ¶ä¼˜åŒ–**
   - å¢åŠ å·¥ä½œçº¿ç¨‹è‡³5ä¸ªï¼ˆåŸºäºAPIé™åˆ¶ï¼‰

2. **é‡è¯•ç­–ç•¥æ”¹è¿›**
   - åŒºåˆ†é”™è¯¯ç±»å‹çš„é‡è¯•ç­–ç•¥
   - APIé™åˆ¶é”™è¯¯ï¼šå»¶é•¿é‡è¯•é—´éš”

3. **è°ƒåº¦ç®—æ³•ä¼˜åŒ–**
   - æœ€ä½³å‘å¸ƒæ—¶é—´é¢„æµ‹ç®—æ³•
   - é¡¹ç›®ä¼˜å…ˆçº§æƒé‡åˆ†é…

## ğŸ›¡ï¸ ç¬¬å››é˜¶æ®µï¼šç³»ç»Ÿç¨³å®šæ€§å¢å¼º (1å‘¨)

### ğŸ“Š ç›‘æ§ä¸è¯Šæ–­

2. **æ•…éšœæ¢å¤æœºåˆ¶**
   - å¡ä½ä»»åŠ¡è‡ªåŠ¨æ¢å¤ï¼ˆè¶…è¿‡5åˆ†é’Ÿï¼‰
   - æ•°æ®åº“é”è¶…æ—¶å¤„ç†

3. **æ•°æ®å®Œæ•´æ€§ä¿éšœ**
   - ä»»åŠ¡çŠ¶æ€ä¸€è‡´æ€§æ£€æŸ¥
   - å®šæœŸæ•°æ®å¤‡ä»½éªŒè¯

## ğŸ” æ·±åº¦åˆ†ææŠ¥å‘Š

### ğŸ“Š å½“å‰ç³»ç»Ÿæ¶æ„åˆ†æ

#### æ•°æ®åº“è®¾è®¡ä¼˜åŠ¿
- **å®Œæ•´çš„å…³ç³»æ¨¡å‹**: Userâ†’Projectâ†’ContentSourceâ†’PublishingTaskâ†’PublishingLog
- **ä¹è§‚é”æœºåˆ¶**: ä½¿ç”¨versionå­—æ®µé˜²æ­¢å¹¶å‘å†²çª

#### æ•°æ®åº“æ€§èƒ½ç“¶é¢ˆ
1. **SQLiteå¹¶å‘é™åˆ¶**
   - å†™æ“ä½œä¸²è¡ŒåŒ–ï¼Œå¤šçº¿ç¨‹å†™å…¥æ€§èƒ½å—é™
   - å¤§æ•°æ®é‡ä¸‹å…¨è¡¨æ‰«æé—®é¢˜ä¸¥é‡
   - ç¼ºä¹åˆ†åŒºè¡¨æ”¯æŒï¼Œå†å²æ•°æ®æ¸…ç†å›°éš¾

2. **ç´¢å¼•ä¼˜åŒ–ä¸è¶³**
   - ç¼ºå°‘å¤åˆç´¢å¼•ï¼š`(status, scheduled_at, priority)`
   - ä»»åŠ¡æŸ¥è¯¢é¢‘ç¹è¿›è¡Œå…¨è¡¨æ‰«æ--é‡ç‚¹ï¼Œé‡ç‚¹ï¼Œé‡ç‚¹

3. **æ•°æ®å¢é•¿é—®é¢˜**
   - PublishingLogè¡¨æ— é™å¢é•¿
   - ç¼ºä¹è‡ªåŠ¨æ¸…ç†æœºåˆ¶
   - å¤‡ä»½ç­–ç•¥ä¸å®Œå–„

### âš¡ APIé™åˆ¶ä¸é¢‘ç‡æ§åˆ¶åˆ†æ

#### å½“å‰é™åˆ¶é…ç½®
```yaml
scheduling:
  daily_min_tasks: 5
  daily_max_tasks: 6
  min_publish_interval: 14400  # 4å°æ—¶
  optimal_hours: [9, 12, 15, 18, 21]
  blackout_hours: [0, 1, 2, 3, 4, 5, 6]
```

#### Twitter APIé…é¢åˆ†æ
- **æ¨æ–‡å‘å¸ƒ**: è¦æ±‚å®é™…ä½¿ç”¨6-10æ¡/å¤©

#### é¢‘ç‡ä¼˜åŒ–æœºä¼š
1. **åŠ¨æ€é—´éš”è°ƒæ•´**: åŸºäºAPIå‰©ä½™é…é¢æ™ºèƒ½è°ƒæ•´
2. **æ—¶æ®µä¼˜åŒ–**: åœ¨optimal_hourså†…é›†ä¸­å‘å¸ƒ
3. **é”™å³°ç­–ç•¥**: é¿å¼€é«˜å³°æœŸï¼Œæé«˜æˆåŠŸç‡

### ğŸ”§ ä»»åŠ¡è°ƒåº¦æœºåˆ¶åˆ†æ

#### è°ƒåº¦å™¨æ¶æ„
```python
class EnhancedTaskScheduler:
    max_workers: 3          # å·¥ä½œçº¿ç¨‹æ•°
    batch_size: 5           # æ‰¹å¤„ç†å¤§å°
    check_interval: 30      # æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
    max_retries: 3          # æœ€å¤§é‡è¯•æ¬¡æ•°
```

#### æ€§èƒ½ç“¶é¢ˆè¯†åˆ«
1. **çº¿ç¨‹æ± é™åˆ¶**: æœ€å¤§3ä¸ªå·¥ä½œçº¿ç¨‹ï¼Œå¤„ç†èƒ½åŠ›æœ‰é™
2. **å•ç‚¹æ•…éšœ**: ä»»åŠ¡å¡ä½ä¼šé˜»å¡æ•´ä¸ªé˜Ÿåˆ—
3. **é‡è¯•ç­–ç•¥**: å›ºå®šé‡è¯•æ¬¡æ•°ï¼Œä¸åŒºåˆ†é”™è¯¯ç±»å‹


### ğŸ“ˆ å‘å¸ƒæœºåˆ¶æ·±åº¦å‰–æ

#### å‘å¸ƒæµç¨‹åˆ†æ
```python
# å½“å‰å‘å¸ƒæµç¨‹
1. ç”Ÿæˆå†…å®¹ -> ContentGenerator.generate_content()
2. éªŒè¯åª’ä½“ -> DynamicPathManager.validate_media_file()
3. ä¸Šä¼ åª’ä½“ -> TwitterPublisher.post_tweet_with_video()
4. å‘å¸ƒæ¨æ–‡ -> client_v2.create_tweet()
5. è®°å½•æ—¥å¿— -> PublishingLogRepository.create_log()
```

#### å…³é”®æ€§èƒ½æŒ‡æ ‡
- **åª’ä½“ä¸Šä¼ æ—¶é—´**: å¹³å‡30-60ç§’ï¼ˆ512MBè§†é¢‘ï¼‰
- **å†…å®¹ç”Ÿæˆæ—¶é—´**: å¹³å‡5-10ç§’ï¼ˆAIå¤„ç†ï¼‰
- **APIè°ƒç”¨å»¶è¿Ÿ**: å¹³å‡1-3ç§’
- **æ€»æ‰§è¡Œæ—¶é—´**: å¹³å‡45-75ç§’/ä»»åŠ¡

#### ä¼˜åŒ–å»ºè®®
1. **å¹¶è¡Œå¤„ç†**: å†…å®¹ç”Ÿæˆä¸åª’ä½“é¢„å¤„ç†å¹¶è¡Œ
2. **ç¼“å­˜æœºåˆ¶**: ç›¸åŒå†…å®¹é¿å…é‡å¤ç”Ÿæˆ

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°ç»†èŠ‚

### æ•°æ®åº“ç´¢å¼•ä¼˜åŒ– SQL
```sql
-- ä»»åŠ¡æŸ¥è¯¢ä¼˜åŒ–ç´¢å¼•
CREATE INDEX idx_tasks_status_scheduled_priority 
ON publishing_tasks(status, scheduled_at, priority);

-- é¡¹ç›®ä»»åŠ¡ç»Ÿè®¡ç´¢å¼•
CREATE INDEX idx_tasks_project_status 
ON publishing_tasks(project_id, status);

-- æ—¥å¿—æŸ¥è¯¢ä¼˜åŒ–ç´¢å¼•
CREATE INDEX idx_logs_task_published 
ON publishing_logs(task_id, published_at);

-- åˆ†æç»Ÿè®¡ç´¢å¼•
CREATE INDEX idx_analytics_hour_project 
ON analytics_hourly(hour_timestamp, project_id);
```

### é…ç½®ä¼˜åŒ–å»ºè®®
```yaml
# å¢å¼ºé…ç½®
scheduling:
  max_workers: 5                    # å¢åŠ å·¥ä½œçº¿ç¨‹
  batch_size: 3                     # å‡å°‘æ‰¹æ¬¡å¤§å°ï¼Œæé«˜å“åº”æ€§
  check_interval: 60               # å»¶é•¿æ£€æŸ¥é—´éš”ï¼Œå‡å°‘CPUå ç”¨
  task_timeout_minutes: 5          # ä»»åŠ¡è¶…æ—¶ä¿æŠ¤
  smart_interval_enabled: true     # å¯ç”¨æ™ºèƒ½é—´éš”è°ƒæ•´
  
database:
  connection_pool_size: 20         # è¿æ¥æ± å¤§å°
  query_timeout: 10               # æŸ¥è¯¢è¶…æ—¶
  enable_wal_mode: true           # å¯ç”¨WALæ¨¡å¼
  auto_vacuum_threshold: 1000000  # è‡ªåŠ¨æ¸…ç†é˜ˆå€¼
  
api_management:
  quota_monitoring: true          # é…é¢ç›‘æ§
  adaptive_intervals: true        # è‡ªé€‚åº”é—´éš”
  rate_limit_buffer: 0.2         # 20%ç¼“å†²åŒº
```