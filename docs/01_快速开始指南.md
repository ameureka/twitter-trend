# å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ å®‰è£…éƒ¨ç½²

### ç³»ç»Ÿè¦æ±‚

- **Python**: 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- **å†…å­˜**: æœ€å°‘ 512MB RAM
- **å­˜å‚¨**: æœ€å°‘ 1GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

### æ–¹å¼ä¸€ï¼šDockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd twitter-trend

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„APIå¯†é’¥

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 4. éªŒè¯éƒ¨ç½²
curl http://localhost:8050/api/health
```

### æ–¹å¼äºŒï¼šæœ¬åœ°å®‰è£…

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd twitter-trend

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. é…ç½®ç¯å¢ƒ
cp .env.example .env
# ç¼–è¾‘é…ç½®æ–‡ä»¶

# 5. éªŒè¯é…ç½®
python scripts/start.py validate

# 6. å¯åŠ¨æœåŠ¡
python scripts/start.py api
```

## âš™ï¸ é…ç½®æŒ‡å—

### ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```env
# === Twitter APIé…ç½® ===
TWITTER_API_KEY=your_api_key_here
TWITTER_API_SECRET=your_api_secret_here
TWITTER_ACCESS_TOKEN=your_access_token_here
TWITTER_ACCESS_TOKEN_SECRET=your_access_token_secret_here

# === Google Gemini APIé…ç½® ===
GEMINI_API_KEY=your_gemini_api_key_here

# === æ•°æ®åº“é…ç½® ===
DATABASE_URL=sqlite:///data/twitter_publisher.db
# PostgreSQLç¤ºä¾‹: postgresql://user:password@localhost:5432/dbname

# === APIæœåŠ¡é…ç½® ===
API_HOST=127.0.0.1
API_PORT=8050
API_DEBUG=false
API_API_KEY=your_secure_api_key_here

# === å®‰å…¨é…ç½® ===
SECRET_KEY=your_secret_key_here
ALLOWED_HOSTS=localhost,127.0.0.1
```

### åº”ç”¨é…ç½®æ–‡ä»¶

ç¼–è¾‘ `config/enhanced_config.yaml`ï¼š

```yaml
# é¡¹ç›®åŸºç¡€è·¯å¾„
project_base_path: "./project"

# æ—¥å¿—é…ç½®
logs:
  path: "./logs/app.log"
  level: "INFO"
  max_bytes: 10485760  # 10MB
  backup_count: 5

# è°ƒåº¦å™¨é…ç½®
scheduler:
  interval_minutes_min: 15
  interval_minutes_max: 30
  max_retries: 3
  retry_delay_base: 60  # ç§’

# å‘å¸ƒé…ç½®
publishing:
  default_language: "en"
  use_ai_enhancement: true
  max_video_size_mb: 512
  supported_formats: ["mp4", "mov", "avi"]

# æ•°æ®åº“é…ç½®
database:
  path: "./data/twitter_publisher.db"
  pool_size: 10
  max_overflow: 20

# å®‰å…¨é…ç½®
security:
  rate_limit_per_minute: 60
  session_timeout: 3600
  password_min_length: 8
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. é¡¹ç›®ç»“æ„è§„èŒƒ

å°†è§†é¢‘é¡¹ç›®æŒ‰ä»¥ä¸‹ç»“æ„ç»„ç»‡ï¼š

```
project/
â”œâ”€â”€ project-name-1/
â”‚   â”œâ”€â”€ output_video_music/    # è§†é¢‘æ–‡ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ video1.mp4
â”‚   â”‚   â””â”€â”€ video2.mov
â”‚   â””â”€â”€ uploader_json/         # å…ƒæ•°æ®æ–‡ä»¶ç›®å½•
â”‚       â”œâ”€â”€ video1_en.json    # è‹±æ–‡å…ƒæ•°æ®
â”‚       â”œâ”€â”€ video1_zh.json    # ä¸­æ–‡å…ƒæ•°æ®
â”‚       â”œâ”€â”€ video2_en.json
â”‚       â””â”€â”€ video2_zh.json
â””â”€â”€ project-name-2/
    â””â”€â”€ ...
```

### 2. å…ƒæ•°æ®æ–‡ä»¶æ ¼å¼

```json
{
  "title": "è§†é¢‘æ ‡é¢˜",
  "description": "è¯¦ç»†çš„è§†é¢‘æè¿°ï¼Œæ”¯æŒå¤šè¡Œæ–‡æœ¬",
  "tags": ["ç§‘æŠ€", "æ•™ç¨‹", "Python"],
  "language": "zh",
  "category": "education",
  "publish_time": "2024-01-01T12:00:00Z",
  "visibility": "public",
  "custom_fields": {
    "hashtags": "#Python #ç¼–ç¨‹ #æ•™ç¨‹",
    "mention_users": ["@username1", "@username2"]
  }
}
```

### 3. å¯åŠ¨æœåŠ¡

#### APIæœåŠ¡å¯åŠ¨

```bash
# æ–¹æ³•ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
./start_api.sh

# æ–¹æ³•äºŒï¼šä½¿ç”¨Pythonå‘½ä»¤
python -m app.main api

# æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ä¸“ç”¨å¯åŠ¨å™¨
python scripts/server/start_api.py

# å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡è½½ï¼‰
python scripts/server/start_api.py --debug
```

#### å‘½ä»¤è¡Œå·¥å…·

```bash
# éªŒè¯é…ç½®
python scripts/start.py validate

# æ‰«æé¡¹ç›®å¹¶åˆ›å»ºä»»åŠ¡
python scripts/start.py scan

# å¯åŠ¨ä»»åŠ¡è°ƒåº¦å™¨
python scripts/start.py scheduler

# è¯¦ç»†è¾“å‡ºæ¨¡å¼
python scripts/start.py api --verbose
```

### 4. è®¿é—®åº”ç”¨

å¯åŠ¨æœåŠ¡åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š

- **Webç•Œé¢**: http://localhost:8080
- **APIæ–‡æ¡£**: http://localhost:8050/docs
- **ReDocæ–‡æ¡£**: http://localhost:8050/redoc
- **å¥åº·æ£€æŸ¥**: http://localhost:8050/api/health

## ğŸ”§ å¼€å‘æ¨¡å¼

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd twitter-trend

# 2. åˆ›å»ºå¼€å‘ç¯å¢ƒ
python -m venv venv
source venv/bin/activate

# 3. å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements.txt
pip install -r requirements-dev.txt  # å¦‚æœå­˜åœ¨

# 4. è®¾ç½®å¼€å‘é…ç½®
export API_DEBUG=true
export API_RELOAD=true

# 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python scripts/start.py api --reload --verbose
```

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è°ƒè¯•æ¨¡å¼ä»¥è·å¾—æ›´å¥½çš„å¼€å‘ä½“éªŒï¼š

```bash
# ä½¿ç”¨å¯åŠ¨è„šæœ¬
./start_api.sh -d

# æˆ–ä½¿ç”¨å‘½ä»¤è¡Œ
python -m app.main api --debug
```

è°ƒè¯•æ¨¡å¼ç‰¹æ€§ï¼š
- è‡ªåŠ¨é‡è½½ä»£ç å˜æ›´
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- å¢å¼ºçš„æ—¥å¿—è¾“å‡º

## ğŸ” éªŒè¯å®‰è£…

### ç³»ç»Ÿå¥åº·æ£€æŸ¥

```bash
# APIå¥åº·æ£€æŸ¥
curl http://localhost:8080/api/health

# ç³»ç»ŸçŠ¶æ€æ£€æŸ¥
curl http://localhost:8050/api/v1/dashboard/health

# é…ç½®éªŒè¯
python scripts/start.py validate
```

### åŠŸèƒ½æµ‹è¯•

```bash
# æµ‹è¯•Twitter APIè¿æ¥
python -c "
from app.core.publisher import TwitterPublisher
from app.utils.config import get_config
config = get_config()
publisher = TwitterPublisher(config)
print('Twitter APIè¿æ¥:', publisher.verify_credentials())
"

# æµ‹è¯•æ•°æ®åº“è¿æ¥
python -c "
from app.database.database import get_database
db = get_database()
print('æ•°æ®åº“è¿æ¥æˆåŠŸ')
"
```

## ğŸš¨ å¸¸è§é—®é¢˜

### 1. Twitter APIè®¤è¯å¤±è´¥

**ç—‡çŠ¶**: `401 Unauthorized` é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥APIå¯†é’¥é…ç½®
python scripts/start.py validate

# éªŒè¯ç¯å¢ƒå˜é‡
echo $TWITTER_API_KEY
```

### 2. ç«¯å£è¢«å ç”¨

**ç—‡çŠ¶**: `Address already in use` é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :8080

# ä½¿ç”¨å…¶ä»–ç«¯å£
python scripts/start.py api --port 8050
```

### 3. ä¾èµ–åŒ…ç¼ºå¤±

**ç—‡çŠ¶**: `ModuleNotFoundError` é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# é‡æ–°å®‰è£…ä¾èµ–
pip install -r requirements.txt

# æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒ
which python
```

### 4. æ•°æ®åº“è¿æ¥å¤±è´¥

**ç—‡çŠ¶**: `sqlite3.OperationalError` é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æƒé™
ls -la data/twitter_publisher.db

# é‡æ–°åˆå§‹åŒ–æ•°æ®åº“
rm data/twitter_publisher.db
python scripts/start.py api  # è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“
```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–æ”¯æŒï¼š

- ğŸ“– [å®Œæ•´æ–‡æ¡£](docs/)
- ğŸ› [æŠ¥å‘ŠBug](../../issues/new?template=bug_report.md)
- ğŸ’¡ [åŠŸèƒ½è¯·æ±‚](../../issues/new?template=feature_request.md)
- â“ [æé—®è®¨è®º](../../discussions)

---

**ä¸‹ä¸€æ­¥**: æŸ¥çœ‹ [APIæ–‡æ¡£](02_APIæ–‡æ¡£.md) äº†è§£è¯¦ç»†çš„æ¥å£ä½¿ç”¨æ–¹æ³•ã€‚