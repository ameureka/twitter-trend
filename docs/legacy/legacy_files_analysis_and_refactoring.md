# é¡¹ç›®æ–‡ä»¶åˆ†æä¸é‡æ„å»ºè®®æŠ¥å‘Š

## æ¦‚è¿°

æœ¬æŠ¥å‘Šåˆ†æäº†é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„8ä¸ªæ–‡ä»¶ï¼Œè¯„ä¼°å…¶ç”¨é€”ã€å…³ç³»é“¾ä»¥åŠé‡æ„å»ºè®®ã€‚åŸºäºä¹‹å‰çš„é‡æ„å·¥ä½œï¼Œéƒ¨åˆ†åŠŸèƒ½å·²ç»è¢«æ•´åˆåˆ°æ–°çš„æ¨¡å—åŒ–ç»“æ„ä¸­ã€‚

## æ–‡ä»¶åˆ†æç»“æœ

### 1. å·²é‡æ„çš„æ—§æ–‡ä»¶ï¼ˆå¯åˆ é™¤ï¼‰

#### 1.1 `analyze_task_distribution.py`
- **çŠ¶æ€**: ğŸ”´ **å¯åˆ é™¤**
- **åŸåŠŸèƒ½**: åˆ†ææ•°æ®åº“ä¸­ä»»åŠ¡çš„åˆ†å¸ƒé€»è¾‘å’Œç‰¹å¾
- **æ–°ä½ç½®**: `scripts/analysis/task_analyzer.py`
- **å…³ç³»é“¾**: å·²è¢« `TaskAnalyzer` ç±»å®Œå…¨æ›¿ä»£
- **å»ºè®®**: åˆ é™¤ï¼ŒåŠŸèƒ½å·²å®Œå…¨è¿ç§»

#### 1.2 `query_tasks.py`
- **çŠ¶æ€**: ğŸ”´ **å¯åˆ é™¤**
- **åŸåŠŸèƒ½**: æŸ¥è¯¢æ•°æ®åº“ä¸­çš„ä»»åŠ¡åˆ†å¸ƒæƒ…å†µ
- **æ–°ä½ç½®**: `scripts/database/task_query.py`
- **å…³ç³»é“¾**: å·²è¢« `TaskQueryManager` ç±»å®Œå…¨æ›¿ä»£
- **å»ºè®®**: åˆ é™¤ï¼ŒåŠŸèƒ½å·²å®Œå…¨è¿ç§»

#### 1.3 `reset_and_scan_projects.py`
- **çŠ¶æ€**: ğŸ”´ **å¯åˆ é™¤**
- **åŸåŠŸèƒ½**: é‡ç½®æ•°æ®åº“å¹¶åŠ¨æ€æ‰«æé¡¹ç›®æ–‡ä»¶å¤¹åˆ›å»ºä»»åŠ¡
- **æ–°ä½ç½®**: `scripts/database/reset_and_scan.py`
- **å…³ç³»é“¾**: å·²è¢« `DatabaseResetManager` ç±»å®Œå…¨æ›¿ä»£
- **å»ºè®®**: åˆ é™¤ï¼ŒåŠŸèƒ½å·²å®Œå…¨è¿ç§»

### 2. éœ€è¦é‡æ„çš„æ–‡ä»¶

#### 2.1 `run_api.py`
- **çŠ¶æ€**: ğŸŸ¡ **éœ€è¦é‡æ„**
- **å½“å‰åŠŸèƒ½**: APIæœåŠ¡å¯åŠ¨è„šæœ¬
- **é—®é¢˜**: ä½ç½®ä¸å½“ï¼ŒåŠŸèƒ½ç®€å•
- **å»ºè®®é‡æ„ä½ç½®**: `scripts/server/start_api.py`
- **æ”¹è¿›å»ºè®®**:
  - æ·»åŠ æ›´å¤šé…ç½®é€‰é¡¹
  - é›†æˆåˆ°ç»Ÿä¸€çš„æœåŠ¡ç®¡ç†ä¸­
  - æ·»åŠ å¥åº·æ£€æŸ¥å’Œç›‘æ§

#### 2.2 `test_db_connection.py`
- **çŠ¶æ€**: ğŸŸ¡ **éœ€è¦é‡æ„**
- **å½“å‰åŠŸèƒ½**: æµ‹è¯•æ•°æ®åº“è¿æ¥
- **é—®é¢˜**: åŠŸèƒ½å•ä¸€ï¼Œå¯ä»¥é›†æˆåˆ°æ›´å¤§çš„æµ‹è¯•æ¡†æ¶ä¸­
- **å»ºè®®é‡æ„ä½ç½®**: `scripts/maintenance/db_health_check.py`
- **æ”¹è¿›å»ºè®®**:
  - æ‰©å±•ä¸ºå®Œæ•´çš„æ•°æ®åº“å¥åº·æ£€æŸ¥
  - é›†æˆåˆ°ç³»ç»Ÿç›‘æ§ä¸­
  - æ·»åŠ è‡ªåŠ¨ä¿®å¤åŠŸèƒ½

#### 2.3 `create_test_data.py`
- **çŠ¶æ€**: ğŸŸ¡ **éœ€è¦é‡æ„**
- **å½“å‰åŠŸèƒ½**: åˆ›å»ºæµ‹è¯•æ•°æ®
- **é—®é¢˜**: æµ‹è¯•æ•°æ®ç¡¬ç¼–ç ï¼Œä¸å¤Ÿçµæ´»
- **å»ºè®®é‡æ„ä½ç½®**: `scripts/development/test_data_generator.py`
- **æ”¹è¿›å»ºè®®**:
  - å‚æ•°åŒ–æµ‹è¯•æ•°æ®ç”Ÿæˆ
  - æ”¯æŒä¸åŒçš„æµ‹è¯•åœºæ™¯
  - é›†æˆåˆ°å¼€å‘å·¥å…·é“¾ä¸­

### 3. éœ€è¦ç‰¹æ®Šå¤„ç†çš„æ–‡ä»¶

#### 3.1 `deploy_enhanced_system.py`
- **çŠ¶æ€**: ğŸŸ  **éœ€è¦è¯„ä¼°**
- **å½“å‰åŠŸèƒ½**: å¢å¼ºç³»ç»Ÿéƒ¨ç½²è„šæœ¬
- **é—®é¢˜**: åŠŸèƒ½å¤æ‚ï¼Œéƒ¨åˆ†è¿‡æ—¶
- **å»ºè®®**: 
  - è¯„ä¼°å½“å‰éƒ¨ç½²éœ€æ±‚
  - å¦‚æœä»éœ€è¦ï¼Œé‡æ„ä¸º `scripts/deployment/deploy.py`
  - ç®€åŒ–é…ç½®ç”Ÿæˆé€»è¾‘
  - é›†æˆç°ä»£åŒ–éƒ¨ç½²å·¥å…·

#### 3.2 `migrate_database.py`
- **çŠ¶æ€**: ğŸŸ  **éœ€è¦è¯„ä¼°**
- **å½“å‰åŠŸèƒ½**: æ•°æ®åº“è¿ç§»è„šæœ¬
- **é—®é¢˜**: å¯èƒ½ä»æœ‰ç”¨é€”ï¼Œä½†éœ€è¦æ›´æ–°
- **å»ºè®®**:
  - å¦‚æœæ•°æ®åº“ç»“æ„ç¨³å®šï¼Œå¯ä»¥åˆ é™¤
  - å¦‚æœä»éœ€è¦ï¼Œé‡æ„ä¸º `scripts/database/migrate.py`
  - é›†æˆåˆ°æ•°æ®åº“ç®¡ç†å·¥å…·ä¸­

## é‡æ„å®æ–½è®¡åˆ’

### é˜¶æ®µ1: æ¸…ç†å·²é‡æ„æ–‡ä»¶ï¼ˆç«‹å³æ‰§è¡Œï¼‰

```bash
# åˆ é™¤å·²å®Œå…¨é‡æ„çš„æ–‡ä»¶
rm analyze_task_distribution.py
rm query_tasks.py
rm reset_and_scan_projects.py
```

### é˜¶æ®µ2: é‡æ„APIå¯åŠ¨è„šæœ¬

1. åˆ›å»º `scripts/server/` ç›®å½•
2. é‡æ„ `run_api.py` ä¸º `scripts/server/start_api.py`
3. å¢å¼ºåŠŸèƒ½å’Œé…ç½®é€‰é¡¹

### é˜¶æ®µ3: é‡æ„æ•°æ®åº“æµ‹è¯•è„šæœ¬

1. é‡æ„ `test_db_connection.py` ä¸º `scripts/maintenance/db_health_check.py`
2. æ‰©å±•ä¸ºå®Œæ•´çš„å¥åº·æ£€æŸ¥å·¥å…·

### é˜¶æ®µ4: é‡æ„æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨

1. åˆ›å»º `scripts/development/` ç›®å½•
2. é‡æ„ `create_test_data.py` ä¸º `scripts/development/test_data_generator.py`
3. å‚æ•°åŒ–å’Œæ¨¡å—åŒ–

### é˜¶æ®µ5: è¯„ä¼°éƒ¨ç½²å’Œè¿ç§»è„šæœ¬

1. è¯„ä¼° `deploy_enhanced_system.py` çš„å®é™…éœ€æ±‚
2. è¯„ä¼° `migrate_database.py` çš„å®é™…éœ€æ±‚
3. æ ¹æ®è¯„ä¼°ç»“æœå†³å®šä¿ç•™ã€é‡æ„æˆ–åˆ é™¤

## æ–°çš„ç›®å½•ç»“æ„

```
scripts/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ README.md
â”œâ”€â”€ script_manager.py          # ç»Ÿä¸€è„šæœ¬ç®¡ç†å™¨
â”œâ”€â”€ start.py                   # åŸæœ‰å¯åŠ¨è„šæœ¬
â”œâ”€â”€ analysis/                  # åˆ†æå·¥å…·
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ task_analyzer.py       # âœ… å·²é‡æ„
â”‚   â””â”€â”€ task_analyzer_legacy.py
â”œâ”€â”€ database/                  # æ•°æ®åº“å·¥å…·
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ reset_and_scan.py      # âœ… å·²é‡æ„
â”‚   â”œâ”€â”€ task_query.py          # âœ… å·²é‡æ„
â”‚   â”œâ”€â”€ migrate.py             # ğŸŸ  å¾…è¯„ä¼°è¿ç§»
â”‚   â””â”€â”€ legacy/
â”‚       â”œâ”€â”€ reset_and_scan_legacy.py
â”‚       â””â”€â”€ task_query_legacy.py
â”œâ”€â”€ server/                    # ğŸ†• æœåŠ¡å™¨ç®¡ç†
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ start_api.py           # ğŸŸ¡ å¾…é‡æ„
â”œâ”€â”€ maintenance/               # ğŸ†• ç»´æŠ¤å·¥å…·
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ db_health_check.py     # ğŸŸ¡ å¾…é‡æ„
â”œâ”€â”€ development/               # ğŸ†• å¼€å‘å·¥å…·
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ test_data_generator.py # ğŸŸ¡ å¾…é‡æ„
â”œâ”€â”€ deployment/                # ğŸ†• éƒ¨ç½²å·¥å…·
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ deploy.py              # ğŸŸ  å¾…è¯„ä¼°
â””â”€â”€ utils/
    â””â”€â”€ __init__.py
```

## æ–‡ä»¶å…³ç³»é“¾åˆ†æ

### æ ¸å¿ƒä¾èµ–å…³ç³»

```
enhanced_main.py
â”œâ”€â”€ scripts/script_manager.py
â”‚   â”œâ”€â”€ scripts/database/reset_and_scan.py
â”‚   â”œâ”€â”€ scripts/database/task_query.py
â”‚   â””â”€â”€ scripts/analysis/task_analyzer.py
â”œâ”€â”€ app/database/
â”œâ”€â”€ app/core/
â””â”€â”€ app/utils/
```

### ç‹¬ç«‹å·¥å…·

- `run_api.py` â†’ `scripts/server/start_api.py`
- `test_db_connection.py` â†’ `scripts/maintenance/db_health_check.py`
- `create_test_data.py` â†’ `scripts/development/test_data_generator.py`

## å®æ–½å»ºè®®

### ä¼˜å…ˆçº§

1. **é«˜ä¼˜å…ˆçº§**: åˆ é™¤å·²é‡æ„çš„æ–‡ä»¶ï¼ˆç«‹å³æ‰§è¡Œï¼‰
2. **ä¸­ä¼˜å…ˆçº§**: é‡æ„APIå¯åŠ¨å’Œæ•°æ®åº“æµ‹è¯•è„šæœ¬
3. **ä½ä¼˜å…ˆçº§**: é‡æ„æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨
4. **å¾…è¯„ä¼°**: éƒ¨ç½²å’Œè¿ç§»è„šæœ¬

### é£é™©è¯„ä¼°

- **ä½é£é™©**: åˆ é™¤å·²é‡æ„æ–‡ä»¶ï¼ˆåŠŸèƒ½å·²å®Œå…¨è¿ç§»ï¼‰
- **ä¸­é£é™©**: é‡æ„APIå’Œæµ‹è¯•è„šæœ¬ï¼ˆåŠŸèƒ½ç®€å•ï¼Œæ˜“äºéªŒè¯ï¼‰
- **é«˜é£é™©**: éƒ¨ç½²è„šæœ¬é‡æ„ï¼ˆéœ€è¦ä»”ç»†è¯„ä¼°ç”Ÿäº§ç¯å¢ƒéœ€æ±‚ï¼‰

### éªŒè¯æ­¥éª¤

1. ç¡®è®¤æ–°åŠŸèƒ½å®Œå…¨è¦†ç›–æ—§åŠŸèƒ½
2. è¿è¡Œæµ‹è¯•ç¡®ä¿ç³»ç»Ÿæ­£å¸¸
3. æ›´æ–°æ–‡æ¡£å’Œå¼•ç”¨
4. é€æ­¥åˆ é™¤æ—§æ–‡ä»¶

## ç»“è®º

é€šè¿‡è¿™æ¬¡åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥ï¼š

1. **ç«‹å³åˆ é™¤** 3ä¸ªå·²å®Œå…¨é‡æ„çš„æ–‡ä»¶
2. **é‡æ„** 3ä¸ªä»æœ‰ç”¨ä½†ä½ç½®ä¸å½“çš„æ–‡ä»¶
3. **è¯„ä¼°** 2ä¸ªå¤æ‚çš„éƒ¨ç½²ç›¸å…³æ–‡ä»¶

è¿™å°†ä½¿é¡¹ç›®ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œå‡å°‘å†—ä½™ä»£ç ï¼Œæé«˜å¯ç»´æŠ¤æ€§ã€‚